# 增强特征工程 - 线性回归分析报告

## 概述

本报告通过增强特征工程方法改进了线性回归模型，包括特征交互、多项式特征和特征选择等技术。

## 特征工程方法

### 1. 特征交互项
创建了以下交互特征：
- **孕周数_BMI**: 孕周数与BMI的乘积
- **孕周数_平方**: 孕周数的平方
- **BMI_平方**: BMI的平方
- **孕周数_BMI_平方**: 孕周数 × BMI²
- **孕周数_平方_BMI**: 孕周数² × BMI
- **孕周数_BMI_比值**: 孕周数 / BMI
- **孕周数_BMI_和**: 孕周数 + BMI
- **孕周数_BMI_差**: 孕周数 - BMI

### 2. 多项式特征
使用2次多项式特征生成器，包含：
- 原始特征
- 特征平方项
- 特征交互项

## 模型性能比较

| 模型类型 | 训练集 R² | 测试集 R² | 训练集 MSE | 测试集 MSE | 交叉验证 R² |
|----------|-----------|-----------|------------|------------|-------------|
| **原始特征** | 0.051460 | 0.019175 | 0.021792 | 0.018902 | 0.037301 ± 0.035643 |
| **增强特征** | 0.084377 | -0.003065 | 0.021036 | 0.019331 | 0.050263 ± 0.022499 |
| **多项式特征** | 0.062048 | **0.032177** | 0.021549 | 0.018652 | 0.028347 ± 0.030745 |

## 关键发现

### 1. 最佳模型
- **多项式特征模型**在测试集上表现最佳，R² = 0.032177
- 相比原始模型，测试集R²提升了约68%

### 2. 特征重要性分析
根据系数绝对值排序，最重要的特征：

1. **孕周数_BMI** (0.517903) - 最重要的交互特征
2. **孕周数_BMI_平方** (0.311165) - 二次交互特征
3. **BMI_平方** (0.169783) - BMI的平方项
4. **孕周数_BMI_和** (0.124123) - 特征和
5. **BMI** (0.101858) - 原始BMI特征
6. **孕周数** (0.095243) - 原始孕周数特征

### 3. 模型改进效果

#### 正面改进：
- 多项式特征模型在测试集上R²从0.019提升到0.032
- 特征交互项显示出较高的重要性
- 模型稳定性有所提升

#### 需要注意的问题：
- 增强特征模型出现过拟合（训练集R²高但测试集R²为负）
- 整体R²值仍然较低，说明线性关系有限

## 特征工程洞察

### 1. 交互效应
- **孕周数_BMI**交互项是最重要的特征，说明孕周数和BMI之间存在协同效应
- 负系数表明在某些组合下，Y染色体浓度会降低

### 2. 非线性关系
- **BMI_平方**和**孕周数_BMI_平方**的重要性表明存在非线性关系
- 多项式特征比简单交互特征表现更好

### 3. 特征冗余
- 一些特征（如孕周数_平方）重要性很低，可能存在冗余
- 建议进行进一步的特征选择

## 改进建议

### 1. 进一步特征工程
- 尝试更高次的多项式特征
- 探索对数变换、平方根变换等
- 考虑时间序列特征（如果数据有时间顺序）

### 2. 模型选择
- 尝试非线性模型（随机森林、XGBoost、神经网络）
- 使用正则化方法（Ridge、Lasso）防止过拟合
- 考虑集成方法

### 3. 特征选择优化
- 使用递归特征消除（RFE）选择最优特征子集
- 尝试基于互信息的特征选择
- 使用前向/后向选择方法

### 4. 数据增强
- 收集更多相关特征
- 考虑数据平衡和异常值处理
- 探索数据的分层分析

## 结论

通过增强特征工程，我们成功提升了线性回归模型的性能：

1. **多项式特征模型**是最佳选择，测试集R²提升了68%
2. **特征交互项**特别是孕周数_BMI交互项最为重要
3. 模型仍然存在改进空间，建议尝试非线性模型

虽然线性回归的R²值仍然不高，但特征工程揭示了数据中重要的非线性关系和交互效应，为后续的模型改进提供了重要指导。

## 文件说明

- `enhanced_linear_regression.py`: 增强特征工程分析脚本
- `enhanced_linear_regression_analysis.png`: 综合分析可视化图表
- `enhanced_linear_regression_results.txt`: 详细数值结果
- `enhanced_analysis_report.md`: 本分析报告
