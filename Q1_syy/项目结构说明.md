# 项目结构说明

## 目录结构

```
Q1_syy/
├── appendix.xlsx                    # 原始数据文件
├── question_solution.md            # 问题解决方案说明
├── 项目结构说明.md                 # 本文件
├── step1/                          # 步骤1：数据预处理
│   ├── data_preprocessing.py       # 主要的数据预处理脚本
│   ├── run_preprocessing.py        # 运行脚本，包含环境检查
│   ├── run_preprocessing.bat       # Windows批处理文件
│   ├── requirements.txt            # 依赖包列表
│   ├── README.md                   # 详细使用说明
│   ├── step1.md                    # 原始需求说明
│   ├── X_features.csv              # 处理后的特征数据
│   ├── y_target.csv                # 处理后的目标变量
│   ├── processed_data.csv          # 完整处理后的数据
│   ├── X_features.npy              # 特征数据(numpy格式)
│   ├── y_target.npy                # 目标变量(numpy格式)
│   └── data_preprocessing_visualization.png  # 数据可视化图表
├── step2_xgboost/                  # 步骤2：XGBoost模型
│   ├── xgboost_model.py            # XGBoost模型训练脚本
│   ├── run_xgboost.py              # 运行脚本
│   ├── run_xgboost.bat             # Windows批处理文件
│   ├── requirements.txt            # 依赖包列表
│   ├── README.md                   # 详细使用说明
│   ├── xgboost.md                  # 模型说明文档
│   ├── xgboost_results.txt         # 模型训练结果
│   ├── xgboost_feature_importance.png  # 特征重要性图
│   └── xgboost_predictions.png     # 预测结果图
├── step2_SVR/                      # 步骤2：支持向量回归模型
│   ├── svr_model.py                # SVR模型训练脚本
│   ├── run_svr.py                  # 运行脚本
│   ├── run_svr.bat                 # Windows批处理文件
│   ├── requirements.txt            # 依赖包列表
│   ├── README.md                   # 详细使用说明
│   ├── SVR.md                      # 模型说明文档
│   ├── svr_results.txt             # 模型训练结果
│   └── svr_analysis.png            # 分析结果图
├── step2_lg/                       # 步骤2：线性回归模型
│   ├── linear_regression_model.py  # 线性回归模型训练脚本
│   ├── run_linear_regression.bat   # Windows批处理文件
│   ├── requirements.txt            # 依赖包列表
│   ├── README.md                   # 详细使用说明
│   ├── 2.md                        # 模型说明文档
│   ├── linear_regression_results.txt  # 模型训练结果
│   └── linear_regression_analysis.png  # 分析结果图
├── step2_rf/                       # 步骤2：随机森林回归模型
│   ├── rf_model.py                 # 随机森林模型训练脚本
│   ├── run_rf.bat                  # Windows批处理文件
│   ├── requirements.txt            # 依赖包列表
│   ├── README.md                   # 详细使用说明
│   ├── rf.md                       # 模型说明文档
│   ├── rf_results.txt              # 模型训练结果
│   ├── rf_feature_importance.png   # 特征重要性图
│   └── rf_predictions.png          # 预测结果图
└── step2_i/                        # 步骤2：特征工程与XGBoost
    ├── feature_engineering_xgboost.py  # 特征工程脚本
    ├── run_feature_engineering.bat     # Windows批处理文件
    ├── requirements.txt                # 依赖包列表
    ├── README.md                       # 详细使用说明
    ├── i.md                            # 模型说明文档
    ├── xgboost_results.txt             # 模型训练结果
    ├── feature_importance.png          # 特征重要性图
    ├── train_predictions.png           # 训练集预测结果图
    └── test_predictions.png            # 测试集预测结果图
```

## 使用说明

### 环境要求
- Python 3.7+
- conda环境：pytorch
- 依赖包见各步骤文件夹中的requirements.txt

### 运行步骤

#### 1. 数据预处理
```bash
cd step1
conda activate pytorch
python run_preprocessing.py
```

#### 2. 机器学习模型训练
选择以下任一模型进行训练：

**XGBoost模型：**
```bash
cd step2_xgboost
conda activate pytorch
python run_xgboost.py
```

**支持向量回归模型：**
```bash
cd step2_SVR
conda activate pytorch
python run_svr.py
```

**线性回归模型：**
```bash
cd step2_lg
conda activate pytorch
run_linear_regression.bat
```

**随机森林回归模型：**
```bash
cd step2_rf
conda activate pytorch
python rf_model.py
```

**特征工程与XGBoost：**
```bash
cd step2_i
conda activate pytorch
python feature_engineering_xgboost.py
```

### 文件说明
- **step1文件夹**：数据预处理，生成特征数据和目标变量
- **step2_*文件夹**：各种机器学习模型的实现
- **appendix.xlsx**：原始数据文件
- 每个模型文件夹都包含完整的训练脚本、说明文档和结果文件

## 数据信息
- 原始数据：1082条记录
- 处理后数据：1062条记录
- 特征：孕周数、BMI
- 目标变量：Y染色体浓度

## 模型对比
项目实现了多种机器学习模型来预测Y染色体浓度：
- **线性回归**：基础线性模型
- **支持向量回归(SVR)**：非线性回归模型
- **随机森林回归**：集成学习模型
- **XGBoost**：梯度提升模型
- **特征工程XGBoost**：带特征工程的XGBoost模型

每个模型都包含完整的训练、评估和可视化功能。
